<!-- M2M Table -->
<div *ngIf="comparisonType === 'm2m'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button (click)="downloadTable('m2m', 'phenotype')"><i
                class="material-icons">cloud_download</i> Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]='dataSourceM2M' class="mat-elevation-z8">
            <ng-container matColumnDef="category_b">
                <th mat-header-cell *matHeaderCellDef> Metadata </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.category_b, 'm2m')">
                    {{element.category_b}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let element"> {{metadataListReady ?
                    metadataLookUp[element.category_b]["vardescFull"]: ""}} </td>
            </ng-container>
            <ng-container matColumnDef="test">
                <th mat-header-cell *matHeaderCellDef> Test </th>
                <td mat-cell *matCellDef="let element"> {{element.test}} </td>
            </ng-container>
            <ng-container matColumnDef="test_statistics">
                <th mat-header-cell *matHeaderCellDef> Test Statistic </th>
                <td mat-cell *matCellDef="let element"> {{(element.test_statistics >= 10000 ||
                    element.test_statistics < 0.001) ? element.test_statistics.toExponential(3) :
                        element.test_statistics.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="pvalue">
                <th mat-header-cell *matHeaderCellDef> P-Value </th>
                <td mat-cell *matCellDef="let element"> {{(element.pvalue >= 10000 || element.pvalue < 0.001) ?
                        element.pvalue.toExponential(3) : element.pvalue.toFixed(5)}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsM2M"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsM2M"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeM2M > 0">
        <mat-paginator [length]="tableSizeM2M" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'm2m')">
        </mat-paginator>
    </div>
</div>

<!-- G2M Table -->
<div *ngIf="comparisonType === 'g2m'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button (click)="downloadTable('g2m', 'phenotype')"><i
                class="material-icons">cloud_download</i> Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]='dataSourceG2M' class="mat-elevation-z8">
            <ng-container matColumnDef="category_b">
                <th mat-header-cell *matHeaderCellDef> Metadata </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.category_b, 'm2g')">
                    {{element.category_b}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let element">{{metadataLookUp[element.category_b]["vardescFull"]
                    !== undefined ? metadataLookUp[element.category_b]["vardescFull"]: ""}}</td>
            </ng-container>
            <ng-container matColumnDef="test">
                <th mat-header-cell *matHeaderCellDef> Test </th>
                <td mat-cell *matCellDef="let element"> {{element.test}} </td>
            </ng-container>
            <ng-container matColumnDef="test_statistics">
                <th mat-header-cell *matHeaderCellDef> Test Statistic</th>
                <td mat-cell *matCellDef="let element"> {{(element.test_statistics >= 10000 ||
                    element.test_statistics < 0.001) ? element.test_statistics.toExponential(3) :
                        element.test_statistics.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="pvalue">
                <th mat-header-cell *matHeaderCellDef> P-Value</th>
                <td mat-cell *matCellDef="let element"> {{(element.pvalue >= 10000 || element.pvalue < 0.001) ?
                        element.pvalue.toExponential(3) : element.pvalue.toFixed(5)}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsG2M"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsG2M"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeG2M > 0">
        <mat-paginator [length]="tableSizeG2M" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'g2m')">
        </mat-paginator>
    </div>
</div>

<!-- M2M Library Table -->
<div *ngIf="comparisonType === 'm2mLibrary'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button (click)="downloadTable('m2mLibrary', 'library')"><i
                class="material-icons">cloud_download</i>
            Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]='dataSourceM2MLibrary' class="mat-elevation-z8">
            <ng-container matColumnDef="category_b">
                <th mat-header-cell *matHeaderCellDef> Metadata </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.category_b, 'm2m')">
                    {{element.category_b}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let element">
                    {{metadataLookUp[element.category_b]["vardescFull"]}} </td>
            </ng-container>
            <ng-container matColumnDef="test">
                <th mat-header-cell *matHeaderCellDef> Test </th>
                <td mat-cell *matCellDef="let element"> {{element.test}} </td>
            </ng-container>
            <ng-container matColumnDef="test_statistics">
                <th mat-header-cell *matHeaderCellDef> Test Statistic</th>
                <td mat-cell *matCellDef="let element"> {{(element.test_statistics >= 10000 ||
                    element.test_statistics < 0.001) ? element.test_statistics.toExponential(3) :
                        element.test_statistics.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="pvalue">
                <th mat-header-cell *matHeaderCellDef> P-Value</th>
                <td mat-cell *matCellDef="let element"> {{(element.pvalue >= 10000 || element.pvalue < 0.001) ?
                        element.pvalue.toExponential(3) : element.pvalue.toFixed(5)}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsM2M"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsM2M"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeM2MLibrary > 0">
        <mat-paginator [length]="tableSizeM2MLibrary" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'm2mlib')">
        </mat-paginator>
    </div>
</div>

<!-- G2M Library Table -->
<div *ngIf="comparisonType === 'g2mLibrary'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button (click)="downloadTable('g2mLibrary', 'library')"><i
                class="material-icons">cloud_download</i>
            Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]='dataSourceG2MLibrary' class="mat-elevation-z8">
            <ng-container matColumnDef="category_b">
                <th mat-header-cell *matHeaderCellDef> Metadata </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.category_b, 'm2g')">
                    {{element.category_b}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let element">
                    {{metadataLookUp[element.category_b]["vardescFull"]}} </td>
            </ng-container>
            <ng-container matColumnDef="test">
                <th mat-header-cell *matHeaderCellDef> Test </th>
                <td mat-cell *matCellDef="let element"> {{element.test}} </td>
            </ng-container>
            <ng-container matColumnDef="test_statistics">
                <th mat-header-cell *matHeaderCellDef> Test Statistic</th>
                <td mat-cell *matCellDef="let element"> {{(element.test_statistics >= 10000 ||
                    element.test_statistics < 0.001) ? element.test_statistics.toExponential(3) :
                        element.test_statistics.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="pvalue">
                <th mat-header-cell *matHeaderCellDef> P-Value</th>
                <td mat-cell *matCellDef="let element"> {{(element.pvalue >= 10000 || element.pvalue < 0.001) ?
                        element.pvalue.toExponential(3) : element.pvalue.toFixed(5)}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsG2M"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsG2M"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeG2MLibrary > 0">
        <mat-paginator [length]="tableSizeG2MLibrary" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'g2mlib')">
        </mat-paginator>
    </div>
</div>

<!-- M2G Table -->
<div *ngIf="comparisonType === 'm2g'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button
            (click)="downloadTable('m2g', 'phenotype')"><i class="material-icons">cloud_download</i>
            Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]="dataSourceM2G" class="mat-elevation-z8"
            *ngIf="dataSourceM2G.length > 0">
            <ng-container matColumnDef="symbol">
                <th mat-header-cell *matHeaderCellDef> Symbol </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.gene, 'm2g')">
                    {{geneToSym[element.gene] !== undefined ?
                    geneToSym[element.gene] : element.gene}} </td>
            </ng-container>
            <ng-container matColumnDef="gene">
                <th mat-header-cell *matHeaderCellDef> Gene </th>
                <td mat-cell *matCellDef="let element"> {{element.gene}} </td>
            </ng-container>
            <ng-container matColumnDef="test">
                <th mat-header-cell *matHeaderCellDef> Test </th>
                <td mat-cell *matCellDef="let element"> {{element.test}} </td>
            </ng-container>
            <ng-container matColumnDef="test_statistics">
                <th mat-header-cell *matHeaderCellDef> Test Statistics </th>
                <td mat-cell *matCellDef="let element"> {{(element.test_statistics >= 10000 ||
                    element.test_statistics < 0.001) ? element.test_statistics.toExponential(3) :
                        element.test_statistics.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="pvalue">
                <th mat-header-cell *matHeaderCellDef> P-Value </th>
                <td mat-cell *matCellDef="let element"> {{(element.pvalue >= 10000 || element.pvalue <
                        0.001) ? element.pvalue.toExponential(3) : element.pvalue.toFixed(5)}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsM2G"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsM2G"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeM2G > 0">
        <mat-paginator [length]="tableSizeM2G" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'm2g')">
        </mat-paginator>
    </div>
</div>


<!-- G2G Table -->
<div *ngIf="comparisonType === 'g2g'">
    <div class="d-flex justify-content-center">
        <button class="download-button" mat-stroked-button (click)="downloadTable('g2g', 'phenotype')"><i
                class="material-icons">cloud_download</i> Download Table</button>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <table mat-table [dataSource]="dataSourceG2G" class="mat-elevation-z8"
            *ngIf="dataSourceG2G.length > 0">
            <ng-container matColumnDef="symbol">
                <th mat-header-cell *matHeaderCellDef> Symbol </th>
                <td class="metaColumn" mat-cell *matCellDef="let element"
                    (click)="onSelectMetadataLink(metadataId, element.gene, 'g2g')">
                    {{element.symbol}} </td>
            </ng-container>
            <ng-container matColumnDef="gene">
                <th mat-header-cell *matHeaderCellDef> Gene </th>
                <td mat-cell *matCellDef="let element"> {{element.gene}} </td>
            </ng-container>
            <ng-container matColumnDef="correlation">
                <th mat-header-cell *matHeaderCellDef> Correlation </th>
                <td mat-cell *matCellDef="let element"> {{(element.correlation >= 10000 ||
                    element.correlation < 0.001) ? element.correlation.toExponential(3) :
                        element.correlation.toFixed(5)}} </td>
            </ng-container>
            <ng-container matColumnDef="entrezid">
                <th mat-header-cell *matHeaderCellDef> Link </th>
                <td mat-cell *matCellDef="let element"> <a target="_blank"
                        href="{{'https://www.ncbi.nlm.nih.gov/gene/' + element.entrezid}}">NIH Link</a>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsG2G"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsG2G"></tr>
        </table>
    </div>
    <div class="d-flex justify-content-center paginator" *ngIf="tableSizeG2G > 0">
        <mat-paginator [length]="tableSizeG2G" [pageSize]="limit" [pageSizeOptions]="[5, 10, 25, 100]"
            [pageIndex]="currPage" aria-label="Select page" (page)="getPageDetails($event, 'g2g')">
        </mat-paginator>
    </div>
</div>